---
description: How to Connect DataDistillr to the Stripe API
---

# Connecting to Stripe

## First Steps with Stripe
Set up an account with [Stripe](https://dashboard.stripe.com/register){target=_blank}.

???+ cost "Cost"

    This is a [paid](https://stripe.com/pricing){target=_blank} API. 


???+ rlimit "Rate Limits"

    The Stripe API employs a number of [safeguards](https://stripe.com/docs/rate-limits){target=_blank} against bursts of incoming traffic to help maximize its stability. 
    Users who send many requests in quick succession may see error responses that show up as status code 429.

## How to Connect DataDistillr to Stripe
To set up a data source connection for Stripe, you will need to have:

- A unique [name](#name) for your data source connection to be used in queries.
- The [Secret Key](#secret-key) generated by Stripe.



### Data Source Form

To locate the Stripe form, follow the steps in [Connecting Your Data to DataDistillr](../../). When you get to the window to choose the data source type, select API as shown below.&#x20;

![Select API from the available choices][image-5]

On the API screen, select Stripe from list of API forms as shown in the image below.

![Select Stripe API from available choices][image-6]

The following form will appear. Instructions can be found below on how to find the information required to fill each field on the Stripe API form.

Once you have filled out all the fields, press the green 'Save' button, and your API will be connected!

![Stripe Form][image-1]

### Name

Enter any name that will help you recognize this data source from within your query window. &#x20;

!!! info "Acceptable characters include"

    * lowercase alphanumeric characters
    * underscores

### Secret Key

=== "1. Sign In"

    You can access your Secret Key at your [Stripe API Keys Page](https://dashboard.stripe.com/apikeys){target=_blank}. 
    Sign in if necessary. Click "Reveal test key" or "Real live key token" (Depending on your account)
    ![Sign in][image-8]

=== "2. Find your API Key"

    Click on the API Key to copy.
    ![Copy API Key][image-4]


## Endpoints

The table below shows a list of endpoints available to connect to within the DataDistillr application. If you need to connect to any endpoints not listed in the table below, please use the [Custom API](custom-apis.md) Form.

| Endpoint                | Optional  Params                                                                                    | Description                                 |
|-------------------------|-----------------------------------------------------------------------------------------------------|---------------------------------------------|
| `/balance_transactions` | payout<br>type<br>created<br>currency<br>ending_before<br>limit<br>source<br>starting_after         | Returns a list of all balance transactions. |
| `/charges`              | customer<br>created<br>ending_before<br>limit<br>payment_intent<br>starting_after<br>transfer_group | Returns a list of all charges.              |
| `/customers`            | email<br>currency<br>ending_before<br>limit<br>starting_after                                       | Returns a list of all customers.            |
| `/disputes`             | charge<br>payment_intent<br>created<br>ending_before<br>limit<br>starting_after                     | Returns a list of all disputes.             |
| `/payouts`              | status<br>arrival_date<br>created<br>destination<br>ending_before<br>limit<br>starting_after        | Returns a list of all payouts               |
| `/refunds`              | charge<br>payment_intent<br>created<br>ending_before<br>limit<br>starting_after                     | Returns a list of all refunds               |


### Nav Tree

The endpoint above will display as follows in the nav tree once your API has successfully connected.

![Stripe Endpoints][image-3]

## Sample Queries

The following queries are intended to help you get started, and make life simpler querying within your API.

For the following examples, suppose that my Stripe data source was called `mystripeapi` and I want to query an endpoint. The endpoint goes after the Stripe data source name:

!!! example "FROM Clause"

    ```sql
    FROM `mystripeapi`.`<ENDPOINT>`
    ```

### Get Balance Transactions Endpoint

Get the list of all your Balance Transactions.

```sql
SELECT * FROM `mystripeapi`.`/balance_transactions`
LIMIT 1000
```

### Get Charges Endpoint

Get the list of your charges.

```sql
SELECT * FROM `mystripeapi`.`/charges`
LIMIT 1000
```

### Get Customers Endpoint

Get the list of all your customers.

```sql
SELECT * FROM `mystripeapi`.`/customers`
LIMIT 1000
```

### Get Disputes Endpoint

Get the list of all your disputes.

```sql
SELECT * FROM `mystripeapi`.`/disputes`
LIMIT 1000
```

### Get Payouts Endpoint

Get the list of all your payouts.

```sql
SELECT * FROM `mystripeapi`.`/payouts`
LIMIT 1000
```

### Get Refunds Endpoint

Get the list of all your refunds.
```sql
SELECT * FROM `mystripeapi`.`/refunds`
LIMIT 1000
```

[image-1]: ../../img/api/stripe/stripe-form.png
[image-2]: ../../img/api/datadog/datadog-application-key.png
[image-3]: ../../img/api/stripe/stripe-endpoints.png
[image-4]: ../../img/api/stripe/stripe-api-copy.png
[image-5]: ../../img/api/add-api.png
[image-6]: ../../img/api/stripe/stripe-select.png
[image-7]: ../../img/api/datadog/datadog-api-copy.png
[image-8]: ../../img/api/stripe/stripe-api.png
